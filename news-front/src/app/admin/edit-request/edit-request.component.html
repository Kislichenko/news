<div *ngIf="form; else loading">
  <button *ngIf="reqData.confirm && !reqData.payed"
    class="btn btn-dark"
    (click)="buy($event)">
    Оплатить рекламный блок
  </button>

  <form [formGroup]="form" (ngSubmit)="submit()">

    <div
    class="form-control">
      <label for="startDate">Дата создания заявки: {{reqData.creationDate | date: 'dd-MM-yyyy'}}</label>
    </div>

    <div
      class="form-control">
      <label for="startDate">Создатель заявки: {{reqData.creator}}</label>
    </div>

    <div
      class="form-control"
      [ngClass]="{invalid: form.get('type').touched && form.get('type').invalid}">
      <label for="subject">Тип рекламного блока:</label>
      <select id="type" formControlName="type">
        <option [value]="null">Select one...</option>
        <option *ngFor="let type of ePropertyType | keyvalue" [ngValue]="type.value">{{type.value}}</option>
      </select>
      <div
        *ngIf="form.get('type').touched && form.get('type').invalid"
        class="validation">
        <small *ngIf="form.get('type').errors.required">
          Введите тип рекламного блока
        </small>
      </div>
    </div>

    <div
      class="form-control"
      [ngClass]="{invalid: form.get('subject').touched && form.get('subject').invalid}">
      <label for="subject">Тематика:</label>
      <input id="subject" type="text" formControlName="subject">
      <div
        *ngIf="form.get('subject').touched && form.get('subject').invalid"
        class="validation">
        <small *ngIf="form.get('subject').errors.required">
          Введите тематику
        </small>
      </div>
    </div>

    <div
      class="form-control"
      [ngClass]="{invalid: form.get('startDate').touched && form.get('startDate').invalid}">
      <label for="startDate">Дата начала размещения: </label>
      <dp-date-picker id="startDate" #dayPicker theme="dp-material" formControlName="startDate"></dp-date-picker>
      <div
        *ngIf="form.get('startDate').touched && form.get('startDate').invalid"
        class="validation">
        <small *ngIf="form.get('startDate').errors.required">
          Введите дату начала размещения рекламного блока
        </small>
      </div>
    </div>

    <div
      class="form-control"
      [ngClass]="{invalid: form.get('endDate').touched && form.get('endDate').invalid}">
      <label for="endDate">Дата окончания размещения: </label>
      <dp-date-picker id="endDate" #dayPicker theme="dp-material" formControlName="endDate"></dp-date-picker>
      <div
        *ngIf="form.get('endDate').touched && form.get('endDate').invalid"
        class="validation">
        <small *ngIf="form.get('endDate').errors.required">
          Введите дату окончания размещения рекламного блока
        </small>
      </div>
    </div>

    <div
      class="form-control"
      [ngClass]="{invalid: form.get('legalData').touched && form.get('legalData').invalid}">
      <label for="legalData">Юридические данные:</label>
      <input id="legalData" type="text" formControlName="legalData">
      <div
        *ngIf="form.get('legalData').touched && form.get('legalData').invalid"
        class="validation">
        <small *ngIf="form.get('legalData').errors.required">
          Введите юридические данные
        </small>
      </div>
    </div>

    <div class="form-control">
      <label>Пожелания:</label>
      <quill-editor formControlName="wishes"></quill-editor>
    </div>

    <button
      class="btn btn-primary"
      type="submit"
      [disabled]="form.invalid || submitted">
      Обновить
    </button>

  </form>
</div>

<ng-template #loading>
  <p class="text-center">Идет загрузка...</p>
</ng-template>
